<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yetkili Paneli | ArxonNetwork</title>

<style>
body {
  background:#0f2027;
  color:white;
  font-family:Arial;
  padding:30px;
}
h2,h3 { color:#00c6ff; }
.box {
  background:rgba(0,0,0,0.5);
  padding:20px;
  border-radius:15px;
  max-width:450px;
  margin-bottom:30px;
}
input,button {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:20px;
  border:none;
}
button {
  background:#00c6ff;
  font-weight:bold;
  cursor:pointer;
}
.app {
  background:rgba(0,0,0,0.6);
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
  border-left:4px solid #00c6ff;
}
.app b { color:#7b6cff; }
.app small { opacity:0.7; }
.action-btns button {
  width:48%;
  margin:5px 1%;
}
.ok { background:#2ecc71; }
.no { background:#e74c3c; }
</style>
</head>

<body>

<h2>ðŸ‘® Yetkili Paneli</h2>
<div id="adminName"></div>

<div class="box">
  <input id="target" placeholder="KullanÄ±cÄ± adÄ±">
  <input id="credit" type="number" placeholder="Verilecek kredi">
  <button onclick="giveCredit()">ðŸ’³ Kredi Ver</button>
  <button onclick="banUser()">â›” Banla</button>
  <button onclick="unbanUser()">âœ… Ban AÃ§</button>
  <button onclick="logout()">ðŸšª Ã‡Ä±kÄ±ÅŸ</button>
</div>

<h3>ðŸ›¡ AAC BaÅŸvurularÄ±</h3>
<div id="aacList"></div>

<hr style="opacity:.3">

<h3>ðŸ“˜ Rehber BaÅŸvurularÄ±</h3>
<div id="rehberList"></div>

<script>
const currentUser = localStorage.getItem("loginUser");
const admins = ["mehmety3232","syvex"];

if (!currentUser || !admins.includes(currentUser.toLowerCase()))
  location.href="index.html";

adminName.innerText="ðŸ‘¤ Yetkili: "+currentUser;

/* KREDÄ° */
function giveCredit(){
  const raw=localStorage.getItem("user_"+target.value);
  if(!raw) return alert("KullanÄ±cÄ± yok");
  const d=JSON.parse(raw);
  d.credit=(d.credit||0)+Number(credit.value);
  localStorage.setItem("user_"+target.value,JSON.stringify(d));
  alert("Kredi verildi");
}

/* BAN */
function banUser(){
  const raw=localStorage.getItem("user_"+target.value);
  if(!raw) return alert("Yok");
  const d=JSON.parse(raw);
  d.banned=true;
  localStorage.setItem("user_"+target.value,JSON.stringify(d));
}
function unbanUser(){
  const raw=localStorage.getItem("user_"+target.value);
  if(!raw) return alert("Yok");
  const d=JSON.parse(raw);
  d.banned=false;
  localStorage.setItem("user_"+target.value,JSON.stringify(d));
}

/* STATUS + SÄ°LME */
function setStatus(key,index,status){
  let list=JSON.parse(localStorage.getItem(key))||[];
  if(status==="no"){
    list.splice(index,1); // RED â†’ SÄ°L
  } else {
    list[index].status="ok"; // ONAY
  }
  localStorage.setItem(key,JSON.stringify(list));
  loadAAC(); loadRehber();
}

/* AAC */
function loadAAC(){
  const list=JSON.parse(localStorage.getItem("aac_basvuru")||"[]");
  aacList.innerHTML=list.length? "" : "<p>BaÅŸvuru yok</p>";
  list.forEach((b,i)=>{
    aacList.innerHTML+=`
    <div class="app">
      <b>${b.nick}</b><br>
      ${b.kont}<br><br>
      ${b.uyg}<br>
      <small>${b.tarih}</small>
      <div class="action-btns">
        <button class="ok" onclick="setStatus('aac_basvuru',${i},'ok')">Onayla</button>
        <button class="no" onclick="setStatus('aac_basvuru',${i},'no')">Reddet</button>
      </div>
    </div>`;
  });
}

/* REHBER */
function loadRehber(){
  const list=JSON.parse(localStorage.getItem("rehber_basvuru")||"[]");
  rehberList.innerHTML=list.length? "" : "<p>BaÅŸvuru yok</p>";
  list.forEach((b,i)=>{
    rehberList.innerHTML+=`
    <div class="app">
      <b>${b.nick}</b><br>
      ${b.yazi}<br>
      <small>${b.tarih}</small>
      <div class="action-btns">
        <button class="ok" onclick="setStatus('rehber_basvuru',${i},'ok')">Onayla</button>
        <button class="no" onclick="setStatus('rehber_basvuru',${i},'no')">Reddet</button>
      </div>
    </div>`;
  });
}

loadAAC(); loadRehber();

function logout(){
  localStorage.removeItem("loginUser");
  location.href="login.html";
}
</script>

</body>
</html>
